# 掘金量化 (GM) 学习重点与路径

## 学习优先级矩阵

```
重要性
  ^
  |  [必须掌握]          [建议掌握]
  |   策略架构             历史数据查询
  |   数据订阅             交易事件处理
  |   下单函数             定时任务
  |   账户查询             撤单操作
  |   枚举常量
  |
  |  [了解即可]          [按需学习]
  |   动态参数             Level2数据
  |   回测参数配置         两融交易
  |                        算法交易
  +--------------------------------> 使用频率
```

---

## 一、必须掌握的核心内容

### 1. 策略程序架构 (最重要)

**学习目标**: 理解策略的基本骨架

```python
from gm.api import *

def init(context):      # 初始化 - 策略启动时执行一次
    pass

def on_bar(context, bars):  # 事件处理 - K线到达时执行
    pass

if __name__ == '__main__':
    run(...)            # 入口 - 启动策略
```

**重点文档**: `2-策略程序架构.md`, `1-快速开始.md`

---

### 2. 数据订阅与获取

**学习目标**: 能订阅行情并获取数据

```python
# 核心函数
subscribe(symbols, frequency, count)  # 订阅
context.data(symbol, frequency, count)  # 获取滑窗数据
```

**关键参数**:
- `frequency`: 'tick', '60s', '1d' 等
- `count`: 数据滑窗大小

**重点文档**: `5.2-数据订阅.md`, `5.3-数据事件.md`

---

### 3. 下单函数

**学习目标**: 能够执行买入卖出操作

| 函数 | 用途 | 推荐度 |
|------|------|--------|
| `order_volume()` | 按指定股数下单 | 高 |
| `order_target_percent()` | 调仓到目标比例 | 高 |
| `order_percent()` | 按资产比例下单 | 中 |
| `order_value()` | 按金额下单 | 中 |
| `order_target_volume()` | 调仓到目标数量 | 中 |

**重点文档**: `5.12-交易函数.md`

---

### 4. 账户与持仓查询

**学习目标**: 能查询资金和持仓

```python
# 资金
context.account().cash['available']  # 可用资金
context.account().cash['nav']        # 总资产

# 持仓
context.account().positions()        # 所有持仓
context.account().position(symbol, side)  # 指定持仓
```

**重点文档**: `3-变量约定.md` (context.account 部分)

---

### 5. 枚举常量

**学习目标**: 知道常用常量的含义

```python
# 必记
OrderSide_Buy / OrderSide_Sell           # 买卖方向
OrderType_Limit / OrderType_Market       # 限价/市价
PositionEffect_Open / PositionEffect_Close  # 开仓/平仓
PositionSide_Long / PositionSide_Short   # 多仓/空仓

# 常用委托状态
OrderStatus_Filled = 3     # 已成交
OrderStatus_Rejected = 8   # 被拒绝
OrderStatus_Canceled = 5   # 已撤销
```

**重点文档**: `6-枚举常量.md`

---

## 二、建议掌握的进阶内容

### 1. 历史数据查询

```python
history(symbol, frequency, start_time, end_time)  # 查询历史
history_n(symbol, frequency, count)               # 查询最近N条
current(symbols)                                   # 查询当前快照
```

**重点文档**: `5.4-行情数据查询函数（免费）.md`

---

### 2. 交易事件处理

```python
def on_order_status(context, order):     # 委托状态变化
    pass

def on_execution_report(context, execrpt):  # 成交回报
    pass
```

**重点文档**: `5.19-交易事件.md`

---

### 3. 定时任务

```python
schedule(schedule_func=algo, date_rule='1d', time_rule='14:50:00')
```

**重点文档**: `5.1-基本函数.md` (schedule 部分)

---

### 4. 撤单操作

```python
orders = get_unfinished_orders()  # 查询未结委托
order_cancel(orders)               # 撤销指定委托
order_cancel_all()                 # 撤销所有委托
```

**重点文档**: `5.12-交易函数.md` (撤单部分)

---

## 三、学习路径建议

### 第一阶段: 基础入门 (1-2天)

1. 阅读 `1-快速开始.md`，理解策略结构
2. 阅读 `2-策略程序架构.md`，了解事件驱动模式
3. 阅读 `3-变量约定.md`，掌握 symbol 和 context
4. **动手**: 运行示例策略，观察输出

### 第二阶段: 数据处理 (1-2天)

1. 阅读 `5.2-数据订阅.md`，学习 subscribe
2. 阅读 `5.3-数据事件.md`，学习 on_bar/on_tick
3. 阅读 `5.4-行情数据查询函数.md`，学习 history
4. **动手**: 写一个打印K线数据的策略

### 第三阶段: 交易执行 (2-3天)

1. 阅读 `5.12-交易函数.md`，学习下单函数
2. 阅读 `6-枚举常量.md`，记忆常用常量
3. 阅读 `5.19-交易事件.md`，学习交易回报
4. 阅读 `4-数据结构.md`，了解 Order/Position 对象
5. **动手**: 写一个简单的均线策略

### 第四阶段: 综合应用 (按需)

- 需要定时执行 -> `5.1-基本函数.md` 的 schedule
- 需要撤单 -> `5.12-交易函数.md` 的撤单部分
- 需要查询委托 -> `5.13-交易查询函数.md`
- 需要处理回测结果 -> `5.23-其他事件.md`

---

## 四、关键知识点速记卡片

### 卡片1: 策略骨架
```
init() -> 订阅数据/设置变量
on_bar() -> 处理K线/交易逻辑
run() -> 启动策略
```

### 卡片2: 数据获取
```
订阅: subscribe(symbols, frequency, count)
滑窗: context.data(symbol, frequency, count)
历史: history(symbol, frequency, start, end)
```

### 卡片3: 下单操作
```
买入开仓: side=Buy + effect=Open
卖出平仓: side=Sell + effect=Close
限价单: order_type=Limit + price=具体价格
市价单: order_type=Market
```

### 卡片4: 账户查询
```
可用资金: context.account().cash['available']
总资产: context.account().cash['nav']
持仓量: context.account().position(symbol, side)['volume']
```

---

## 五、常见错误与解决

| 错误现象 | 可能原因 | 解决方法 |
|----------|----------|----------|
| 委托被拒绝 | 资金/持仓不足 | 检查 available 和 volume |
| 无法获取数据 | 未订阅 | 先调用 subscribe() |
| 滑窗数据不够 | count 设置太小 | subscribe 时增大 count |
| 沪市市价单失败 | 未填保护限价 | 市价单也要填 price |
| 回测无交易 | init 里下单 | 回测模式 init 不能交易 |

---

## 六、文档阅读优先级

### 必读 (核心)
- `1-快速开始.md`
- `2-策略程序架构.md`
- `3-变量约定.md`
- `5.2-数据订阅.md`
- `5.3-数据事件.md`
- `5.12-交易函数.md`
- `6-枚举常量.md`

### 推荐读 (常用)
- `4-数据结构.md`
- `5.1-基本函数.md`
- `5.4-行情数据查询函数.md`
- `5.19-交易事件.md`

### 选读 (按需)
- `5.5-通用数据函数.md`
- `5.6-股票财务数据.md`
- `5.13-交易查询函数.md`
- `5.20-动态参数.md`
- `5.22-其他函数.md`
- `5.23-其他事件.md`

### 高级 (特殊场景)
- `5.14-两融交易函数.md`
- `5.15-算法交易函数.md`
- Level2 数据相关
- 期货/期权专用函数
